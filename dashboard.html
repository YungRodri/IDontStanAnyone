<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Audit Dashboard</title>
    <meta name="description" content="Local dashboard to view Instagram follower audit data">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: { 900: '#0a0a0f', 800: '#12121a', 700: '#1a1a25', 600: '#252530' }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a25 50%, #0f0f1a 100%);
        }

        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .gradient-text {
            background: linear-gradient(135deg, #ec4899, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(168, 85, 247, 0.15);
        }

        .card-reviewed {
            opacity: 0.5;
            border: 1px solid rgba(34, 197, 94, 0.3) !important;
        }

        .card-reviewed:hover {
            opacity: 0.8;
        }

        .reviewed-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
        }

        .drop-zone {
            transition: all 0.3s ease;
        }

        .drop-zone.dragover {
            border-color: #a855f7;
            background: rgba(168, 85, 247, 0.1);
            transform: scale(1.02);
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .profile-ring {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            padding: 3px;
            border-radius: 50%;
        }

        .profile-ring-reviewed {
            background: linear-gradient(45deg, #22c55e, #16a34a);
        }

        .avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #374151, #4b5563);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: #9ca3af;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a25;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #a855f7, #ec4899);
            border-radius: 4px;
        }
    </style>
</head>

<body class="min-h-screen text-gray-100">
    <!-- Header -->
    <header class="sticky top-0 z-50 glass border-b border-white/5">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 rounded-xl bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold gradient-text">Instagram Audit</h1>
                        <p class="text-xs text-gray-500">Follower Analysis Dashboard</p>
                    </div>
                </div>
                <div id="stats" class="hidden items-center gap-6">
                    <div class="text-center">
                        <p class="text-2xl font-bold text-white" id="totalCount">0</p>
                        <p class="text-xs text-gray-500">Not following</p>
                    </div>
                    <div class="text-center">
                        <p class="text-2xl font-bold text-green-400" id="reviewedCount">0</p>
                        <p class="text-xs text-gray-500">Reviewed</p>
                    </div>
                    <div class="text-center">
                        <p class="text-2xl font-bold text-purple-400" id="filteredCount">0</p>
                        <p class="text-xs text-gray-500">Showing</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8">
        <!-- Drop Zone -->
        <div id="dropZone"
            class="drop-zone glass rounded-2xl p-16 text-center cursor-pointer hover:border-purple-500/50 transition-all">
            <div class="max-w-md mx-auto">
                <div
                    class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-pink-500/20 to-purple-600/20 flex items-center justify-center">
                    <svg class="w-10 h-10 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                </div>
                <h2 class="text-2xl font-bold mb-2">Drop your file here</h2>
                <p class="text-gray-400 mb-6">or click to select <code class="text-purple-400">audit_data.json</code>
                </p>
                <input type="file" id="fileInput" accept=".json" class="hidden">
                <button onclick="document.getElementById('fileInput').click()"
                    class="px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 rounded-xl font-medium hover:opacity-90 transition-opacity">Select
                    File</button>
            </div>
        </div>

        <!-- Controls -->
        <div id="controls" class="hidden mb-8 space-y-4">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1 relative">
                    <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <input type="text" id="searchInput" placeholder="Search by name or username..."
                        class="w-full pl-12 pr-4 py-3 glass rounded-xl bg-dark-800/50 border border-white/10 focus:border-purple-500 focus:outline-none transition-colors">
                </div>
                <select id="sortSelect"
                    class="px-4 py-3 glass rounded-xl bg-dark-800/50 border border-white/10 focus:border-purple-500 focus:outline-none cursor-pointer min-w-[180px]">
                    <option value="username_asc">Username A-Z</option>
                    <option value="username_desc">Username Z-A</option>
                    <option value="followers_desc">Most followers</option>
                    <option value="followers_asc">Least followers</option>
                    <option value="not_reviewed_first">Not reviewed first</option>
                    <option value="reviewed_first">Reviewed first</option>
                </select>
                <select id="filterReviewed"
                    class="px-4 py-3 glass rounded-xl bg-dark-800/50 border border-white/10 focus:border-purple-500 focus:outline-none cursor-pointer min-w-[140px]">
                    <option value="all">All</option>
                    <option value="not_reviewed">Not reviewed</option>
                    <option value="reviewed">Reviewed</option>
                </select>
                <button id="resetBtn"
                    class="px-6 py-3 glass rounded-xl border border-white/10 hover:border-red-500/50 hover:bg-red-500/10 transition-all flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                    </svg>
                    New file
                </button>
            </div>
            <div class="flex justify-end">
                <button id="clearReviewedBtn"
                    class="px-4 py-2 text-sm glass rounded-lg border border-white/10 hover:border-yellow-500/50 hover:bg-yellow-500/10 transition-all flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                    </svg>
                    Clear reviewed history
                </button>
            </div>
        </div>

        <!-- Grid -->
        <div id="usersGrid" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>

        <!-- Empty State -->
        <div id="emptyState" class="hidden text-center py-16">
            <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center">
                <svg class="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <p class="text-gray-500">No results found</p>
        </div>
    </main>

    <footer class="text-center py-6 text-gray-600 text-sm">
        <p>Instagram Audit Dashboard v1.0.0 by <span class="text-purple-400 font-medium">@YungRodri</span></p>
    </footer>

    <script>
        // State
        var allUsers = [], filteredUsers = [], reviewedUsers = {}, STORAGE_KEY = 'ig_audit_reviewed';

        // DOM
        var dropZone = document.getElementById('dropZone');
        var fileInput = document.getElementById('fileInput');
        var controls = document.getElementById('controls');
        var usersGrid = document.getElementById('usersGrid');
        var emptyState = document.getElementById('emptyState');
        var stats = document.getElementById('stats');
        var searchInput = document.getElementById('searchInput');
        var sortSelect = document.getElementById('sortSelect');
        var filterReviewed = document.getElementById('filterReviewed');
        var totalCount = document.getElementById('totalCount');
        var reviewedCount = document.getElementById('reviewedCount');
        var filteredCount = document.getElementById('filteredCount');

        // LocalStorage
        function loadReviewed() { try { reviewedUsers = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'); } catch (e) { reviewedUsers = {}; } }
        function saveReviewed() { try { localStorage.setItem(STORAGE_KEY, JSON.stringify(reviewedUsers)); } catch (e) { } }
        function markReviewed(u) { reviewedUsers[u] = Date.now(); saveReviewed(); updateReviewedCount(); renderUsers(); }
        function isReviewed(u) { return !!reviewedUsers[u]; }
        function clearReviewed() { if (confirm('Clear all reviewed history?')) { reviewedUsers = {}; saveReviewed(); updateReviewedCount(); renderUsers(); } }
        function updateReviewedCount() { var c = 0; for (var i = 0; i < allUsers.length; i++) if (isReviewed(allUsers[i].username)) c++; reviewedCount.textContent = c; }
        loadReviewed();

        // Events
        dropZone.addEventListener('dragover', function (e) { e.preventDefault(); dropZone.classList.add('dragover'); });
        dropZone.addEventListener('dragleave', function () { dropZone.classList.remove('dragover'); });
        dropZone.addEventListener('drop', function (e) { e.preventDefault(); dropZone.classList.remove('dragover'); if (e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0]); });
        dropZone.addEventListener('click', function () { fileInput.click(); });
        fileInput.addEventListener('change', function (e) { if (e.target.files[0]) handleFile(e.target.files[0]); });
        document.getElementById('resetBtn').addEventListener('click', function () { location.reload(); });
        document.getElementById('clearReviewedBtn').addEventListener('click', clearReviewed);

        function handleFile(file) {
            if (!file.name.endsWith('.json')) { alert('Please select a JSON file'); return; }
            var reader = new FileReader();
            reader.onload = function (e) {
                try {
                    var data = JSON.parse(e.target.result);
                    allUsers = Array.isArray(data) ? data : (data.users || []);
                    initDashboard();
                } catch (err) { alert('Error reading file: ' + err.message); }
            };
            reader.readAsText(file);
        }

        function initDashboard() {
            dropZone.classList.add('hidden');
            controls.classList.remove('hidden');
            usersGrid.classList.remove('hidden');
            stats.classList.remove('hidden');
            stats.classList.add('flex');
            totalCount.textContent = allUsers.length;
            updateReviewedCount();
            filteredUsers = allUsers.slice();
            renderUsers();
            searchInput.addEventListener('input', filterAndRender);
            sortSelect.addEventListener('change', filterAndRender);
            filterReviewed.addEventListener('change', filterAndRender);
        }

        function filterAndRender() {
            var search = searchInput.value.toLowerCase().trim();
            var sort = sortSelect.value;
            var filter = filterReviewed.value;

            filteredUsers = allUsers.filter(function (u) {
                var match = (u.username || '').toLowerCase().indexOf(search) !== -1 || (u.full_name || '').toLowerCase().indexOf(search) !== -1;
                if (filter === 'reviewed' && !isReviewed(u.username)) return false;
                if (filter === 'not_reviewed' && isReviewed(u.username)) return false;
                return match;
            });

            filteredUsers.sort(function (a, b) {
                switch (sort) {
                    case 'username_asc': return (a.username || '').localeCompare(b.username || '');
                    case 'username_desc': return (b.username || '').localeCompare(a.username || '');
                    case 'followers_desc': return (b.follower_count || 0) - (a.follower_count || 0);
                    case 'followers_asc': return (a.follower_count || 0) - (b.follower_count || 0);
                    case 'reviewed_first': return (isReviewed(b.username) ? 1 : 0) - (isReviewed(a.username) ? 1 : 0);
                    case 'not_reviewed_first': return (isReviewed(a.username) ? 1 : 0) - (isReviewed(b.username) ? 1 : 0);
                    default: return 0;
                }
            });
            renderUsers();
        }

        function formatNum(n) { if (n == null) return '-'; if (n >= 1e6) return (n / 1e6).toFixed(1) + 'M'; if (n >= 1e3) return (n / 1e3).toFixed(1) + 'K'; return n; }

        function renderUsers() {
            filteredCount.textContent = filteredUsers.length;
            if (filteredUsers.length === 0) { usersGrid.classList.add('hidden'); emptyState.classList.remove('hidden'); return; }
            emptyState.classList.add('hidden'); usersGrid.classList.remove('hidden');

            var html = '';
            for (var i = 0; i < filteredUsers.length; i++) {
                var u = filteredUsers[i], reviewed = isReviewed(u.username);
                var initial = (u.full_name || u.username || '?').charAt(0).toUpperCase();
                html += '<div class="card-hover glass rounded-2xl p-5 fade-in relative ' + (reviewed ? 'card-reviewed' : '') + '" style="animation-delay:' + Math.min(i * 30, 500) + 'ms" data-username="' + u.username + '">';
                if (reviewed) html += '<span class="reviewed-badge">REVIEWED</span>';
                html += '<div class="flex items-start gap-4">';
                html += '<a href="https://instagram.com/' + u.username + '" target="_blank" class="flex-shrink-0 profile-link" data-username="' + u.username + '"><div class="profile-ring ' + (reviewed ? 'profile-ring-reviewed' : '') + '"><div class="avatar">' + initial + '</div></div></a>';
                html += '<div class="flex-1 min-w-0">';
                html += '<a href="https://instagram.com/' + u.username + '" target="_blank" class="font-semibold text-white hover:text-purple-400 transition-colors flex items-center gap-1.5 profile-link" data-username="' + u.username + '">@' + u.username;
                if (u.is_verified) html += '<svg class="w-4 h-4 text-blue-400" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>';
                if (u.is_private) html += '<svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>';
                html += '</a><p class="text-sm text-gray-400 truncate">' + (u.full_name || '') + '</p>';
                html += '<div class="flex flex-wrap gap-2 mt-3">';
                if (u.follower_count != null) html += '<span class="px-2 py-1 text-xs rounded-lg bg-purple-500/20 text-purple-300 font-medium">' + formatNum(u.follower_count) + ' followers</span>';
                if (u.mutual_followers_count > 0) html += '<span class="px-2 py-1 text-xs rounded-lg bg-pink-500/20 text-pink-300 font-medium">' + u.mutual_followers_count + ' mutual</span>';
                html += '</div></div></div></div>';
            }
            usersGrid.innerHTML = html;

            var links = document.querySelectorAll('.profile-link');
            for (var j = 0; j < links.length; j++) {
                links[j].addEventListener('click', function () { markReviewed(this.getAttribute('data-username')); });
            }
        }
    </script>
</body>

</html>
